{"version":3,"sources":["../../../../../../../../../home/jan/workspace/django_shop/shop/staticfiles/js/catalogue/catalogue.js"],"names":[],"mappings":"AAAA,IAAI,YAAY;AACZ,aAAU,GAAG,eAAH,CAAmB,EAAnB,CADE;AAEZ,cAAW,GAAG,eAAH,CAAmB,EAAnB,CAFC;AAGZ,gBAAY,EAAE,qCAAF,EAAyC,GAAzC,EAHA;AAIZ,iBAAa,KAAK,KAAL,CAAW,EAAE,kCAAF,EAAsC,GAAtC,EAAX;AAJD,CAAhB;AAMA,GAAG,aAAH,CAAiB,SAAjB;;AAEA,EAAE,QAAF,EAAY,KAAZ,CAAkB,YAAY;;AAE1B,aAAS,EAAC,SAAS,KAAK,SAAL,CAAe,UAAU,WAAzB,CAAV,EAAT;AACA,MAAE,OAAF,CAAU,gBAAV,EAA4B,MAA5B,EAAqC,UAAS,IAAT,EAAe;AAChD,aAAK,OAAL,CAAa,OAAb,CAAqB,UAAS,CAAT,EAAY,CAAZ,EAAc;AAC/B,cAAE,cAAF,GAAmB,EAAE,OAAF,CAAU,MAAV,CAAiB,UAAS,CAAT,EAAW;AAAE,uBAAO,EAAE,EAAF,IAAQ,CAAf;AAAkB,aAAhD,CAAnB;AACH,SAFD;AAGA,kBAAU,OAAV,CAAkB,KAAK,OAAvB;AACA,UAAE,eAAF,EAAmB,YAAnB;AACH,KAND;;AAQA,MAAE,qBAAF,EAAyB,QAAzB,CAAkC,QAAlC,EAA4C,WAA5C,EAAyD,YAAY;AACjE,YAAI,WAAW,EAAE,IAAF,EAAQ,MAAR,GAAiB,IAAjB,CAAsB,SAAtB,CAAf;AACA,YAAI,UAAU,IAAI,QAAJ,CAAa,MAAb,CAAoB,UAAU,CAAV,EAAa;AAC3C,gBAAI,EAAE,EAAF,IAAQ,QAAZ,EAAsB,OAAO,IAAP;AACzB,SAFa,EAEX,CAFW,CAAd;AAGA,YAAI,QAAQ,EAAE,IAAF,EAAQ,IAAR,CAAa,KAAb,CAAZ;AACA,gBAAQ,QAAR,GAAmB,OAAO,WAAP,CAAmB,YAAY;AAC9C,gBAAI,QAAQ,YAAR,IAAwB,QAAQ,MAAR,CAAe,MAAf,GAAwB,CAApD,EACI,QAAQ,YAAR,GAAuB,CAAvB,CADJ,KAGI,QAAQ,YAAR,IAAwB,CAAxB;AACJ,kBAAM,IAAN,CAAW,KAAX,EAAkB,QAAQ,MAAR,CAAe,QAAQ,YAAvB,CAAlB;AACH,SANkB,EAMhB,IANgB,CAAnB;AAOH,KAbD;AAcA,MAAE,qBAAF,EAAyB,QAAzB,CAAkC,QAAlC,EAA4C,UAA5C,EAAwD,YAAY;AAChE,YAAI,WAAW,EAAE,IAAF,EAAQ,MAAR,GAAiB,IAAjB,CAAsB,SAAtB,CAAf;AACA,YAAI,UAAU,IAAI,QAAJ,CAAa,MAAb,CAAoB,UAAU,CAAV,EAAa;AAC3C,gBAAI,EAAE,EAAF,IAAQ,QAAZ,EAAsB,OAAO,IAAP;AACzB,SAFa,EAEX,CAFW,CAAd;AAGA,sBAAc,QAAQ,QAAtB;AACH,KAND;AAOA,QAAI,aAAa,EAAE,qBAAF,EAAyB,GAAzB,EAAjB;AACA,MAAE,OAAF,EAAW,QAAX,CAAoB;AAChB,qBAAa,IADG;AAEhB,cAAM,KAAK,KAAL,CAAW,EAAE,OAAF,EAAW,IAAX,CAAgB,MAAhB,CAAX,CAFU,EAE2B,YAAY,mBAFvC;AAGhB,sBAAc;AAHE,KAApB;AAKH,CAtCD","file":"catalogue-compiled.js","sourcesContent":["var viewModel = {\n    filters : ko.observableArray([]),\n    products : ko.observableArray([]),\n    categories: $('#variables input[name=\"categories\"]').val(),\n    filterNames: JSON.parse($('#variables input[name=\"filters\"]').val())\n};\nko.applyBindings(viewModel);\n\n$(document).ready(function () {\n\n    params = {filters: JSON.stringify(viewModel.filterNames)};\n    $.getJSON(\"/api/products/\", params , function(data) {\n        data.filters.forEach(function(f, i){\n            f.selectedOption = f.options.filter(function(o){ return o.id == 1 });\n        });\n        viewModel.filters(data.filters);\n        $('.selectpicker').selectpicker();\n    });\n\n    $('#products-container').delegate('.image', 'mouseover', function () {\n        var parentId = $(this).parent().attr('data-id');\n        var product = api.products.filter(function (p) {\n            if (p.id == parentId) return true;\n        })[0];\n        var image = $(this).find('img');\n        product.interval = window.setInterval(function () {\n            if (product.currentImage >= product.images.length + 1)\n                product.currentImage = 0;\n            else\n                product.currentImage += 1;\n            image.attr('src', product.images[product.currentImage]);\n        }, 1000);\n    });\n    $('#products-container').delegate('.image', 'mouseout', function () {\n        var parentId = $(this).parent().attr('data-id');\n        var product = api.products.filter(function (p) {\n            if (p.id == parentId) return true;\n        })[0];\n        clearInterval(product.interval);\n    });\n    var categories = $('#product-categories').val();\n    $('#tree').treeview({\n        enableLinks: true,\n        data: JSON.parse($('#tree').attr('data')), expandIcon: 'fa fa-plus-square',\n        collapseIcon: 'fa fa-minus-square'\n    });\n})"]}