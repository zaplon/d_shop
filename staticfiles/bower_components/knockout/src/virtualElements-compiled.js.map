{"version":3,"sources":["../../../../../../../../../../home/jan/workspace/django_shop/shop/staticfiles/bower_components/knockout/src/virtualElements.js"],"names":[],"mappings":"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","file":"virtualElements-compiled.js","sourcesContent":["(function() {\n    // \"Virtual elements\" is an abstraction on top of the usual DOM API which understands the notion that comment nodes\n    // may be used to represent hierarchy (in addition to the DOM's natural hierarchy).\n    // If you call the DOM-manipulating functions on ko.virtualElements, you will be able to read and write the state\n    // of that virtual hierarchy\n    //\n    // The point of all this is to support containerless templates (e.g., <!-- ko foreach:someCollection -->blah<!-- /ko -->)\n    // without having to scatter special cases all over the binding and templating code.\n\n    // IE 9 cannot reliably read the \"nodeValue\" property of a comment node (see https://github.com/SteveSanderson/knockout/issues/186)\n    // but it does give them a nonstandard alternative property called \"text\" that it can read reliably. Other browsers don't have that property.\n    // So, use node.text where available, and node.nodeValue elsewhere\n    var commentNodesHaveTextProperty = document && document.createComment(\"test\").text === \"<!--test-->\";\n\n    var startCommentRegex = commentNodesHaveTextProperty ? /^<!--\\s*ko(?:\\s+([\\s\\S]+))?\\s*-->$/ : /^\\s*ko(?:\\s+([\\s\\S]+))?\\s*$/;\n    var endCommentRegex =   commentNodesHaveTextProperty ? /^<!--\\s*\\/ko\\s*-->$/ : /^\\s*\\/ko\\s*$/;\n    var htmlTagsWithOptionallyClosingChildren = { 'ul': true, 'ol': true };\n\n    function isStartComment(node) {\n        return (node.nodeType == 8) && startCommentRegex.test(commentNodesHaveTextProperty ? node.text : node.nodeValue);\n    }\n\n    function isEndComment(node) {\n        return (node.nodeType == 8) && endCommentRegex.test(commentNodesHaveTextProperty ? node.text : node.nodeValue);\n    }\n\n    function getVirtualChildren(startComment, allowUnbalanced) {\n        var currentNode = startComment;\n        var depth = 1;\n        var children = [];\n        while (currentNode = currentNode.nextSibling) {\n            if (isEndComment(currentNode)) {\n                depth--;\n                if (depth === 0)\n                    return children;\n            }\n\n            children.push(currentNode);\n\n            if (isStartComment(currentNode))\n                depth++;\n        }\n        if (!allowUnbalanced)\n            throw new Error(\"Cannot find closing comment tag to match: \" + startComment.nodeValue);\n        return null;\n    }\n\n    function getMatchingEndComment(startComment, allowUnbalanced) {\n        var allVirtualChildren = getVirtualChildren(startComment, allowUnbalanced);\n        if (allVirtualChildren) {\n            if (allVirtualChildren.length > 0)\n                return allVirtualChildren[allVirtualChildren.length - 1].nextSibling;\n            return startComment.nextSibling;\n        } else\n            return null; // Must have no matching end comment, and allowUnbalanced is true\n    }\n\n    function getUnbalancedChildTags(node) {\n        // e.g., from <div>OK</div><!-- ko blah --><span>Another</span>, returns: <!-- ko blah --><span>Another</span>\n        //       from <div>OK</div><!-- /ko --><!-- /ko -->,             returns: <!-- /ko --><!-- /ko -->\n        var childNode = node.firstChild, captureRemaining = null;\n        if (childNode) {\n            do {\n                if (captureRemaining)                   // We already hit an unbalanced node and are now just scooping up all subsequent nodes\n                    captureRemaining.push(childNode);\n                else if (isStartComment(childNode)) {\n                    var matchingEndComment = getMatchingEndComment(childNode, /* allowUnbalanced: */ true);\n                    if (matchingEndComment)             // It's a balanced tag, so skip immediately to the end of this virtual set\n                        childNode = matchingEndComment;\n                    else\n                        captureRemaining = [childNode]; // It's unbalanced, so start capturing from this point\n                } else if (isEndComment(childNode)) {\n                    captureRemaining = [childNode];     // It's unbalanced (if it wasn't, we'd have skipped over it already), so start capturing\n                }\n            } while (childNode = childNode.nextSibling);\n        }\n        return captureRemaining;\n    }\n\n    ko.virtualElements = {\n        allowedBindings: {},\n\n        childNodes: function(node) {\n            return isStartComment(node) ? getVirtualChildren(node) : node.childNodes;\n        },\n\n        emptyNode: function(node) {\n            if (!isStartComment(node))\n                ko.utils.emptyDomNode(node);\n            else {\n                var virtualChildren = ko.virtualElements.childNodes(node);\n                for (var i = 0, j = virtualChildren.length; i < j; i++)\n                    ko.removeNode(virtualChildren[i]);\n            }\n        },\n\n        setDomNodeChildren: function(node, childNodes) {\n            if (!isStartComment(node))\n                ko.utils.setDomNodeChildren(node, childNodes);\n            else {\n                ko.virtualElements.emptyNode(node);\n                var endCommentNode = node.nextSibling; // Must be the next sibling, as we just emptied the children\n                for (var i = 0, j = childNodes.length; i < j; i++)\n                    endCommentNode.parentNode.insertBefore(childNodes[i], endCommentNode);\n            }\n        },\n\n        prepend: function(containerNode, nodeToPrepend) {\n            if (!isStartComment(containerNode)) {\n                if (containerNode.firstChild)\n                    containerNode.insertBefore(nodeToPrepend, containerNode.firstChild);\n                else\n                    containerNode.appendChild(nodeToPrepend);\n            } else {\n                // Start comments must always have a parent and at least one following sibling (the end comment)\n                containerNode.parentNode.insertBefore(nodeToPrepend, containerNode.nextSibling);\n            }\n        },\n\n        insertAfter: function(containerNode, nodeToInsert, insertAfterNode) {\n            if (!insertAfterNode) {\n                ko.virtualElements.prepend(containerNode, nodeToInsert);\n            } else if (!isStartComment(containerNode)) {\n                // Insert after insertion point\n                if (insertAfterNode.nextSibling)\n                    containerNode.insertBefore(nodeToInsert, insertAfterNode.nextSibling);\n                else\n                    containerNode.appendChild(nodeToInsert);\n            } else {\n                // Children of start comments must always have a parent and at least one following sibling (the end comment)\n                containerNode.parentNode.insertBefore(nodeToInsert, insertAfterNode.nextSibling);\n            }\n        },\n\n        firstChild: function(node) {\n            if (!isStartComment(node))\n                return node.firstChild;\n            if (!node.nextSibling || isEndComment(node.nextSibling))\n                return null;\n            return node.nextSibling;\n        },\n\n        nextSibling: function(node) {\n            if (isStartComment(node))\n                node = getMatchingEndComment(node);\n            if (node.nextSibling && isEndComment(node.nextSibling))\n                return null;\n            return node.nextSibling;\n        },\n\n        hasBindingValue: isStartComment,\n\n        virtualNodeBindingValue: function(node) {\n            var regexMatch = (commentNodesHaveTextProperty ? node.text : node.nodeValue).match(startCommentRegex);\n            return regexMatch ? regexMatch[1] : null;\n        },\n\n        normaliseVirtualElementDomStructure: function(elementVerified) {\n            // Workaround for https://github.com/SteveSanderson/knockout/issues/155\n            // (IE <= 8 or IE 9 quirks mode parses your HTML weirdly, treating closing </li> tags as if they don't exist, thereby moving comment nodes\n            // that are direct descendants of <ul> into the preceding <li>)\n            if (!htmlTagsWithOptionallyClosingChildren[ko.utils.tagNameLower(elementVerified)])\n                return;\n\n            // Scan immediate children to see if they contain unbalanced comment tags. If they do, those comment tags\n            // must be intended to appear *after* that child, so move them there.\n            var childNode = elementVerified.firstChild;\n            if (childNode) {\n                do {\n                    if (childNode.nodeType === 1) {\n                        var unbalancedTags = getUnbalancedChildTags(childNode);\n                        if (unbalancedTags) {\n                            // Fix up the DOM by moving the unbalanced tags to where they most likely were intended to be placed - *after* the child\n                            var nodeToInsertBefore = childNode.nextSibling;\n                            for (var i = 0; i < unbalancedTags.length; i++) {\n                                if (nodeToInsertBefore)\n                                    elementVerified.insertBefore(unbalancedTags[i], nodeToInsertBefore);\n                                else\n                                    elementVerified.appendChild(unbalancedTags[i]);\n                            }\n                        }\n                    }\n                } while (childNode = childNode.nextSibling);\n            }\n        }\n    };\n})();\nko.exportSymbol('virtualElements', ko.virtualElements);\nko.exportSymbol('virtualElements.allowedBindings', ko.virtualElements.allowedBindings);\nko.exportSymbol('virtualElements.emptyNode', ko.virtualElements.emptyNode);\n//ko.exportSymbol('virtualElements.firstChild', ko.virtualElements.firstChild);     // firstChild is not minified\nko.exportSymbol('virtualElements.insertAfter', ko.virtualElements.insertAfter);\n//ko.exportSymbol('virtualElements.nextSibling', ko.virtualElements.nextSibling);   // nextSibling is not minified\nko.exportSymbol('virtualElements.prepend', ko.virtualElements.prepend);\nko.exportSymbol('virtualElements.setDomNodeChildren', ko.virtualElements.setDomNodeChildren);\n"]}